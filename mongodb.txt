<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Comandos básicos para MongoDB</title>
  <meta name="description" content="MongoDB es una base de datos no relacional basada en documentos. Esto significa que almacena lainformación como colecciones de documentos, concretamente docu...">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/font-awesome.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://megalomono.github.io/2015/08/12/mongodb-basic-commands.html">
  <link rel="alternate" type="application/rss+xml" title="alfonso perez" href="http://megalomono.github.io/feed.xml" />
</head>

  <body>
    <div class="container">
      <div class="page-content">
        <div class="row">
  <div class="col-md-8 col-md-offset-2">
    <header class="site-header">
  <h1><a class="site-title" href="/">alfonso perez</a></h1>
  <ul>
    <li><a href="/articles" title="Artículos" data-toggle="tooltip" data-placement="bottom"><i class="fa fa-book fa-lg"></i></a></li>
    <li><a href="/tags" title="Tags" data-toggle="tooltip" data-placement="bottom"><i class="fa fa-tags fa-lg"></i></a></li>
    <!--<li><a href="#" title="Linkedin" data-toggle="tooltip" data-placement="bottom"><i class="fa fa-linkedin fa-lg"></i></a></li>-->
    <li><a href="https://github.com/megalomono" title="Github"data-toggle="tooltip" data-placement="bottom"><i class="fa fa-github fa-lg"></i></a></li>
    <li><a class="page-link" href="/feed.xml" title="Feed" data-toggle="tooltip" data-placement="bottom"><i class="fa fa-rss fa-lg"></i></a></li>
  </ul>
</header>

    <div class="post">
      <header class="post-header">
        <h2 class="post-title">Comandos básicos para MongoDB</h2>
        <p class="post-meta">12/08/2015</p>
        
          <a class="btn btn-default" href="/tags/#MongoDB" role="button">MongoDB</a>
        
      </header>
      <article class="post-content">
        <p>MongoDB es una base de datos no relacional basada en documentos. Esto significa que almacena la
información como colecciones de documentos, concretamente documentos en formato JSON. El modo más
rápido de realizar consultas y otras operaciones contra una base de datos Mongo es a través del Mongo Shell.</p>

<p>Tras arrancar Mongo Shell mediante el comando <em>mongo</em>, los mensajes de log indicarán sobre qué base
de datos se está trabajando. Esto mismo se puede comprobar fácilmente tecleando <em>db</em>, que imprimirá
por pantalla el nombre de la base de datos actual. En realidad, <em>db</em> es un objeto Javascript que representa
a la base de datos y que tiene como propiedades cada una de las colecciones de la misma. En MongoDB no
existe ningún lenguaje intermedio del estilo de SQL para operar sobre los datos; todas las operaciones
en MongoDB son llamadas a funciones sobre una colección.</p>

<h3 id="inserciones">Inserciones</h3>

<p>Para insertar un nuevo documento en una colección se emplearía la función <em>insert()</em>. Si la colección no
existiese, MongoDB la crearía.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">insert</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">spaceship</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">X-Wing fighter</span><span class="dl">"</span> <span class="p">})</span></code></pre></figure>

<p>La función <em>insert()</em> acepta como parámetro un objeto JSON, así que seria posible hacer algo como esto:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">obiwan</span> <span class="o">=</span> <span class="p">{}</span>
<span class="o">&gt;</span> <span class="nx">obiwan</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Obi-Wan Kenobi</span><span class="dl">"</span>
<span class="o">&gt;</span> <span class="nx">obiwan</span><span class="p">.</span><span class="nx">job</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Jedi</span><span class="dl">"</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">obiwan</span><span class="p">)</span></code></pre></figure>

<p>Si no se indica explícitamente, MongoDB establece por defecto un atributo “_id” al realizar la inserción.
Este atributo es único e inmutable y es empleado como clave primaria.</p>

<h3 id="búsquedas">Búsquedas</h3>

<p>Para recuperar un documento insertado hay dos opciones. La primera es utilizar la función <em>findOne()</em>,
que devuelve el primer documento de la colección que cumple los criterios de búsqueda:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">findOne</span><span class="p">()</span>
<span class="p">{</span>
    <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55cb6ff60319cca29dcba39e</span><span class="dl">"</span><span class="p">),</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">spaceship</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">X-Wing fighter</span><span class="dl">"</span>
<span class="p">}</span></code></pre></figure>

<p>La función <em>findOne()</em> admite dos parámetros: un filtro (la clausula WHERE de SQL) y una proyección
(la clausula SELECT). Ambos parámetros son opcionales y son objetos JSON. Si por ejemplo se desea
recuperar el rebelde cuyo nombre es “Han Solo” y mostrar su nave espacial, la consulta sería:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">findOne</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Han Solo</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="dl">"</span><span class="s2">spaceship</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">spaceship</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Millenium Falcon</span><span class="dl">"</span> <span class="p">}</span></code></pre></figure>

<p>El primer argumento indica que se filtre el resultado por el atributo “name” cuyo valor sea “Han Solo”, mientras que
el segundo argumento indica qué campos devolver mediante <strong>true</strong> o <strong>false</strong>. Cabe resaltar que, por defecto,
MongoDB devuelve siempre el campo “_id” del documento salvo que se indique lo contrario explícitamente.</p>

<p>La otra opción para recuperar los documentos de una colección es emplear la función <em>find()</em>. La principal diferencia
entre <em>findOne()</em> y <em>find()</em> es que la primera devuelve un documento, mientras que la segunda devuelve un cursor sobre
el que se puede iterar para leer los resutados de la consulta. Por defecto, MongoDB mantiene el cursor abierto hasta que se
finalice la lectura sobre la colección o hasta que pasen 10 minutos de inactividad.</p>

<p>La función <em>find()</em> admite los mismos parámetros que la función <em>findOne()</em>, de modo que se pueden filtrar
los resultados y proyectar los campos que se desee recuperar.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">race</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">wookiee</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Chewbacca</span><span class="dl">"</span> <span class="p">}</span></code></pre></figure>

<p>Además de filtrar por los propios campos de la colección, Mongo ofrece varios operadores que permiten afinar
las búsquedas. Por ejemplo, si se quieren recuperar los rebeldes con más de 700 años de edad se podría hacer
uso del operador <em>$gt</em>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">age</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span> <span class="na">$gt</span> <span class="p">:</span> <span class="mi">700</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="kc">false</span> <span class="p">})</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Yoda</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">age</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">900</span> <span class="p">}</span></code></pre></figure>

<p>Existen varios operadores que permiten realizar distintos filtrados, todos ellos explicados en la <a href="http://docs.mongodb.org/manual/reference/operator/query/">documentación
de MongoDB</a>.</p>

<p>Conviene resaltar que tanto <em>findOne()</em> como <em>find()</em> devolveran aquellos documentos que cumplen <strong>todas</strong> las
condiciones del filtro; dicho de otro modo, se construyen predicados conjuntivos por defecto. Se puede construir
un predicado disyuntivo aplicando el operador <em>$or</em> sobre un array de condiciones. Por ejemplo, para recuperar
a los rebeldes que, o bien pertenecen a la familia Skywalker, o bien son wookies, habría que ejecutar la siguiente
consulta (la función <em>pretty()</em> simplemente formatea el resultado para hacerlo más legible):</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="na">$or</span><span class="p">:</span> <span class="p">[{</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="p">{</span> <span class="na">$regex</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Skywalker</span><span class="dl">"</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">race</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">wookiee</span><span class="dl">"</span> <span class="p">}]}).</span><span class="nx">pretty</span><span class="p">()</span>
<span class="p">{</span>
    <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55cb8670519cca29dcba3a0</span><span class="dl">"</span><span class="p">),</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">spaceship</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">X-Wing fighter</span><span class="dl">"</span>
<span class="p">}</span>
<span class="p">{</span>
    <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55cb86e80319cca29dcba3a1</span><span class="dl">"</span><span class="p">),</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Chewbacca</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">race</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">wookiee</span><span class="dl">"</span>
<span class="p">}</span></code></pre></figure>

<p>Por último, para contar los resultados (el equivalente al COUNT de SQL) existe la función <em>count()</em>, que se
comporta de forma análoga a <em>find()</em>:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">count</span><span class="p">()</span>
<span class="mi">5</span></code></pre></figure>

<h3 id="actualizaciones">Actualizaciones</h3>

<p>A la hora de actualizar un documento MongoDB ofrece la función <em>update()</em>. Esta función puede usarse de dos maneras:
o bien para realizar una modificación de todo el documento, o bien para modificar solo determinados campos.
En ambos casos <em>update()</em> recibe como primer parámetro un filtro para establecer sobre qué documentos se realizarán
las modificaciones; el segundo argumento varía según como se desee ejecutar la función.</p>

<p>Con la primera opción, <em>update()</em> remplaza todos los campos del documento por los valores indicados, sobreescribiendo
el documento a todos los efectos (a excepción del campo “_id”, que es inmutable).</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">affiliation</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Dark side</span><span class="dl">"</span> <span class="p">})</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">}</span> <span class="p">).</span><span class="nx">pretty</span><span class="p">()</span>
<span class="p">{</span>
    <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55cb8670519cca29dcba3a0</span><span class="dl">"</span><span class="p">),</span>
    <span class="dl">"</span><span class="s2">affiliation</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Light side</span><span class="dl">"</span>
<span class="p">}</span></code></pre></figure>

<p>Con esta consulta se ha actualizado a Luke Skywalker y ahora está en el Lado Oscuro, pero por el camino se ha perdido el
resto de su información. Para mantener toda la información anterior habría que añadir a la consulta de modificación todos y
cada uno de los campos del documento, sufran o no cambios. Por motivos obvios, esto es poco práctico.</p>

<p>Para evitar este problema existe el segundo modo de ejecutar la función, que es básicamente igual a lo anterior pero con
una pequeña modificación que consiste en el uso del operador <em>$set</em>. Por ejemplo, para que Luke se pase al lado oscuro,
pero sin perder nada con el cambio, bastaría con lo siguiente:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="na">$set</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">affiliation</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Dark side</span><span class="dl">"</span> <span class="p">}</span> <span class="p">})</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">}</span> <span class="p">).</span><span class="nx">pretty</span><span class="p">()</span>
<span class="p">{</span>
    <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55cb8670519cca29dcba3a0</span><span class="dl">"</span><span class="p">),</span>
    <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">,</span>
    <span class="dl">"</span><span class="s2">affiliation</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Dark side</span><span class="dl">"</span>
<span class="p">}</span></code></pre></figure>

<p>De esta forma se le indica a MongoDB que únicamente debe actualizar el campo “affiliation”. Este último método es mucho más
práctico y seguro, ya que no es necesario conocer y propagar todos los campos de un documento para conservar su información.</p>

<p>Se puede eliminar un campo que ya no sea necesario ejecutando la función <em>update()</em> con el operador <em>$unset</em> e indicando
los campos a eliminar.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="na">$unset</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">affiliation</span><span class="dl">"</span> <span class="p">:</span> <span class="mi">1</span> <span class="p">}</span> <span class="p">})</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span><span class="p">})</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55cb8670519cca29dcba3a0</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Luke Skywalker</span><span class="dl">"</span> <span class="p">}</span></code></pre></figure>

<p>Por último, hay una opción muy útil a la hora de realizar una modificación en un documento y es que es posible indicar
a MongoDB que, si no existe el documento para modificar, cree un nuevo documento con los valores indicados mediante el
parámetro <em>upsert: true</em>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">R2D2</span><span class="dl">"</span><span class="p">}</span> <span class="p">)</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">update</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">R2D2</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="na">$set</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">race</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Droid</span><span class="dl">"</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="na">upsert</span> <span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">R2D2</span><span class="dl">"</span><span class="p">}</span> <span class="p">)</span>
<span class="p">{</span> <span class="dl">"</span><span class="s2">_id</span><span class="dl">"</span> <span class="p">:</span> <span class="nx">ObjectId</span><span class="p">(</span><span class="dl">"</span><span class="s2">55ccw2703b996fff1ed3f8c3</span><span class="dl">"</span><span class="p">),</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">R2D2</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">race</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Droid</span><span class="dl">"</span> <span class="p">}</span></code></pre></figure>

<p>Es importante tener en cuenta que la función <em>update()</em> <strong>afecta únicamente al primer documento que coincida con el filtro de
búsqueda</strong>. Para realizar una modificación que afecte a todos los registros que coincidan con las condiciones de filtrado es
necesario añadir la opción <em>multi: true</em>.</p>

<h3 id="borrados">Borrados</h3>

<p>Finalmente, para completar el conjunto de operaciones CRUD, existe la opción de borrar un documento. Para esto existe la
función <em>remove()</em>.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">remove</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Yoda</span><span class="dl">"</span> <span class="p">})</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">find</span><span class="p">({</span> <span class="dl">"</span><span class="s2">name</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">Yoda</span><span class="dl">"</span><span class="p">})</span></code></pre></figure>

<p>Al contrario que la función <em>update()</em>, <em>remove()</em> <strong>afecta a todos los documentos que coincidan con el filtro de búsqueda</strong>.
Es decir, llamar a <em>remove()</em> con el filtro de búsqueda {} eliminará todos los documentos de la colección. No obstante, si esto
último es lo que se quiere hacer realmente, es mucho más eficiente emplear la función <em>drop()</em>; mientras que <em>remove()</em> recorre
la colección eliminando los documentos uno a uno, <em>drop()</em> elimina la colección directamente.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">drop</span><span class="p">()</span>
<span class="kc">true</span>
<span class="o">&gt;</span> <span class="nx">db</span><span class="p">.</span><span class="nx">rebels</span><span class="p">.</span><span class="nx">count</span><span class="p">()</span>
<span class="mi">0</span></code></pre></figure>

<h3 id="conclusión">Conclusión</h3>

<p>Las funciones aquí mostradas cubren las necesidades básicas de cualquier base de datos: inserciones, lecturas, modificaciones y
borrados. Obviamente, existe la posibilidad de ejecutar operaciones más avanzadas. Se puede obtener más información sobre
estas operaciones en la <a href="http://docs.mongodb.org/manual/">documentación de MongoDB</a>, donde se explican en detalle todas las
funcionalidades que ofrece este sistema.</p>


      </article>      
    </div>
    <footer class="site-footer">
  Copyright © 2014-2017 Alfonso Pérez
</footer>
  </div>
</div>

      </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script>
      $(function () {
        $('[data-toggle="tooltip"]').tooltip()
      })
    </script>
  </body>
</html>
